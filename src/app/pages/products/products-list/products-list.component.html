<app-confirm 
    (confirm)="deleteItems($event)"
/>

<app-sidebar />

<app-header titulo="Estoque" icon="dolly-solid.svg"/>


<div class="container-fluid">
    <div class="row justify-content-center mt-5">
        <div class="col-11 d-flex align-items-center" routerLink="/home">
            <i class="bi bi-arrow-left-short fs-4"></i>
            <a href="">Voltar</a>
        </div>
    </div>

    <div class="row justify-content-center align-items-center my-3">
        <div class="col-11 bg-white p-3 shadow rounded">
            <form [formGroup]="searchFields" action="">
                <div class="row">
                    <div class="col">
                        <mdb-form-control>
                            <input mdbInput type="email" id="form1Example1" class="form-control" name="name" formControlName="name"/>
                            <label mdbLabel class="form-label" for="form1Example1">Nome do Produto</label>
                        </mdb-form-control>
                    </div>

                
                    <div class="col">
                        <select class="form-control form-select shadow-none" id="floatingSelect" aria-label="Floating label select example" formControlName="category">
                            <option [value]="null">Categoria</option>

                            @for (category of categories; track $index) {
                                <option value="{{ category.name }}"> {{ category.name }} </option>
                            }

                        </select>
                    </div>

                    <div class="col-2 p-0">
                        <button type="button" class="btn btn-danger w-100" mdbRipple (click)="search()">Pesquisar</button>
                    </div>
                    <div class="col-auto d-flex text-center">
                        <div class="row">
                            <div mdbDropdown class="dropdown">

                                <button 
                                    type="button" 
                                    class="btn btn-danger btn-floating me-2 " 
                                    id="dropdownMenuButton"
                                    aria-expanded="false"
                                    mdbDropdownToggle
                                    mdbRipple
                                ><i class="bi bi-plus fs-5"></i>
                                </button>
        
                                <ul mdbDropdownMenu class="dropdown-menu" aria-labelledby="dropdownMenuButton">
                                    <li><a class="dropdown-item" (click)="openModal('product')">Produto</a></li>
                                    <li><a class="dropdown-item" (click)="openModal('category')">Categoria</a></li>
                                    <li><a class="dropdown-item" (click)="openModal('unity')">Unidade</a></li>
                                </ul>
                            </div>
                        </div>
                    


                        <!-- <button type="button" class="btn btn-danger btn-floating me-2" (click)="openAddModal()" mdbRipple><i class="bi bi-plus fs-5"></i></button> -->
                        <button 
                            type="button" class="btn btn-danger btn-floating" 
                            (click)="openDeleteModal()" mdbRipple>
                            <i class="bi bi-trash-fill"></i></button>
                    </div>
                </div>
            </form>
        </div>
    </div>

    <app-table 
        [headers]="headers"
        [indexes]="indexes"
        [data]="products"
        [resetItemsToDelete]="resetList"
        (id)="editProduct($event)"
        (itemsToDelete)="getItemsToDelete($event)"
 
    />
</div>



