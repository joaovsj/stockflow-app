<app-sidebar />
<app-header titulo="Relatórios" icon="chart-pie-solid.svg" />

<!-- <div class="chart-container">
    <canvas  id="MyChart" >{{ chart }}</canvas>
</div> -->


<div class="container-fluid">
    <div class="row justify-content-center mt-5">
        <div class="col-11 d-flex align-items-center" routerLink="/home">
            <i class="bi bi-arrow-left-short fs-4"></i>
            <a href="">Voltar</a>
        </div>
    </div>

    <div class="row justify-content-center align-items-center my-3">
        <div class="col-11 bg-white p-3 pe-4 shadow rounded">
            <form [formGroup]="searchFields" action="">
                <div class="row">
                    <!-- <div class="col">
                        <mdb-form-control>
                            <input mdbInput type="email" id="form1Example1" class="form-control" name="name" formControlName="name"/>
                            <label mdbLabel class="form-label" for="form1Example1">Nome do Produto</label>
                        </mdb-form-control>
                    </div> -->

                
                    <div class="col">
                        <select class="form-control form-select shadow-none" id="floatingSelect" aria-label="Floating label select example" formControlName="type">
                            <option selected value="">Todas Movimentações</option>
                            <option value="E">Entradas</option>
                            <option value="S">Saídas</option>
                        </select>
                    </div>

                    <div class="col">
                        <select class="form-control form-select shadow-none" id="floatingSelect" aria-label="Floating label select example" formControlName="user">
                            <option selected value="">Usuários</option>

                            @for (user of users; track $index) {
                                <option value="{{ user.id }}"> {{ user.name }} </option>
                            }

                        </select>
                    </div>

                    
                    <div class="col d-flex align-items-center">
                        <label for="from" class="me-2">Início</label>
                        <input type="date" name="from" id="from" class="input_date" formControlName="from">

                        <label for="until" class="me-2 ms-3">Até</label>
                        <input type="date" name="until" id="until" class="input_date" formControlName="until">
                    </div>

                    <!-- <div class="col">
                        
                    </div> -->


                    <div class="col-2 p-0">
                        <button type="button" class="btn btn-danger w-100" mdbRipple (click)="search()">Atualizar Filtro</button>
                    </div>
                    
                
                 
                    


                        <!-- <button type="button" class="btn btn-danger btn-floating me-2" (click)="openAddModal()" mdbRipple><i class="bi bi-plus fs-5"></i></button> -->
   
                </div>
            </form>
        </div>
    </div>

    
    <div class="row justify-content-center mb-5" style="height: min-content;">
        <div class="col-11 px-2 py-5 pb-0 bg-white shadow rounded d-flex">
            <div class="d-flex flex-column w-50 gap-4 pb-5 pt-2">
                <div class="chart-container" style="height: 40vh;">
                    <canvas  id="barChart">{{ barChart }}</canvas>
                </div> 
                <div class="chart-container" style="height: 40vh;">
                    <canvas  id="pieChart" class="mx-auto">{{ pieChart }}</canvas>
                </div> 
            </div>

            <div class="w-50" style="height: 80vh;">
                <div class="table-responsive h-100" >
                    <table class="table table-striped table-hover align-middle">
                        <thead>
                            <tr class="text-light">
                                <th class="text-capitalize">Nome</th>
                                <th class="text-capitalize">Quantidade</th>
                                <th class="text-capitalize">Preço</th>
                            </tr>
                        </thead>
                        <tbody>
                            @for (product of products; track $index) {
                                <tr>
                                    <td>{{ product.name }}</td>
                                    <td>{{ product.quantity }}</td>
                                    <td> R$ {{ product.price }}</td>
                                </tr>
                            } @empty {
                                <p class="my-5 fs-5 text-center">Nenhum registro encontrado...</p>
                            }
                        </tbody>
                        <!-- <caption class="pb-0">
                            <nav aria-label="Page navigation example" class="d-flex justify-content-center">
                                <ul class="pagination p-0 mt-4 mb-0">
                                  <li class="page-item">
                                    <a class="page-link">
                                      <span aria-hidden="true">&laquo;</span>
                                    </a>
                                  </li>
                                  <li class="page-item"><a class="page-link">{{ currentPage }}</a></li>
                                  <li class="page-item"><a class="page-link">{{ currentPage+1 }}</a></li>
                                  <li class="page-item"><a class="page-link">{{ currentPage+2}}</a></li>
                                  <li class="page-item">
                                    <a class="page-link">
                                      <span aria-hidden="true">&raquo;</span>
                                    </a>
                                  </li>
                                </ul>
                              </nav>
                        </caption> -->
                    </table>
            
                    </div>
            </div>
        </div>
    </div>



</div>


